import{r as d,o as p,c as g,w as h,a as e,b as m,d as f,v as _,u as y,R as v,i as u,e as w,f as x,g as S,h as j,G as k}from"./index-CsKy0wzl.js";const C=e("h4",null,"New User",-1),N=e("div",{class:"d-flex justify-content-center mt-2"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1),R={__name:"ColdStartItem",props:{userId:String,onConfirm:void 0},setup(c){const n=c,a=d("");async function r(){const t=await fetch(`/api/cold_start/${n.userId}`,{method:"POST",body:JSON.stringify({sent:a.value}),headers:{"content-type":"application/json"}}),o=await t.json();t.ok?n.onConfirm():alert(o.message)}return(t,o)=>(p(),g(y(v),{class:"book-details-modal p-4 row","content-class":"col-10 col-lg-6 book-details max-w-xl rounded-lg space-y-2"},{default:h(()=>[e("form",{onSubmit:m(r,["prevent"]),class:"p-4"},[C,f(e("textarea",{required:"","onUpdate:modelValue":o[0]||(o[0]=i=>a.value=i),class:"form-control",rows:"5",placeholder:"Please describe the books you are looking for..."},null,512),[[_,a.value]]),N],32)]),_:1}))}},I={class:"w-100 car d-flex justify-content-center align-items-center"},O={class:"mb-2"},T=e("label",{for:"username",class:"form-label"},[S("Name"),e("span",{class:"text-danger"},"*")],-1),V=e("div",{class:"d-flex justify-content-around"},[e("button",{class:"btn btn-primary",type:"submit"},"Login")],-1),P={__name:"LoginView",setup(c){const n=u("user"),a=u("userRatings"),r=d(""),t=w();async function o(){const l=await fetch("/api/login",{method:"POST",body:JSON.stringify({username:r.value}),headers:{"Content-Type":"application/json"}}),s=await l.json();l.ok?(localStorage.setItem("user",JSON.stringify(s)),n.value=s,a.value=await j(s.id),s.isNew?i():t.push("/")):alert(s.message)}function i(){const{open:l,close:s}=k({component:R,attrs:{userId:n.value.id,onConfirm(){s(),t.push("/")}}});l()}return(l,s)=>(p(),x("div",I,[e("form",{onSubmit:m(o,["prevent"]),class:"col-10 col-md-6 p-3"},[e("div",O,[T,f(e("input",{class:"form-control",id:"username",placeholder:"Please input your name","onUpdate:modelValue":s[0]||(s[0]=b=>r.value=b),required:""},null,512),[[_,r.value]])]),V],32)]))}};export{P as default};
