import{i as n,r as u,u as d,o as m,c as p,a as s,w as f,v as g,b as _,d as v,g as b}from"./index-BFj6eiOf.js";const h={class:"w-100 car d-flex justify-content-center align-items-center"},y={class:"mb-2"},w=s("label",{for:"username",class:"form-label"},[v("Name"),s("span",{class:"text-danger"},"*")],-1),x=s("div",{class:"d-flex justify-content-around"},[s("button",{class:"btn btn-primary",type:"submit"},"Login")],-1),S={__name:"LoginView",setup(j){const r=n("user"),o=n("userRatings"),t=u(""),i=d();async function l(){const a=await fetch("/api/login",{method:"POST",body:JSON.stringify({username:t.value}),headers:{"Content-Type":"application/json"}}),e=await a.json();a.ok?(localStorage.setItem("user",JSON.stringify(e)),r.value=e,o.value=await b(e.id),console.log(o.value),i.push("/")):alert(e.message)}return(a,e)=>(m(),p("div",h,[s("form",{onSubmit:_(l,["prevent"]),class:"col-10 col-md-6 p-3"},[s("div",y,[w,f(s("input",{class:"form-control",id:"username",placeholder:"Please input your name","onUpdate:modelValue":e[0]||(e[0]=c=>t.value=c),required:""},null,512),[[g,t.value]])]),x],32)]))}};export{S as default};
